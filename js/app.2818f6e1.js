(function(t){function e(e){for(var n,s,r=e[0],c=e[1],l=e[2],u=0,f=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&f.push(o[s][0]),o[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,r=1;r<a.length;r++){var c=a[r];0!==o[c]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},o={app:0},i=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("8a23"),o=a.n(n);o.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticClass:"min-width-420",attrs:{id:"app"}},[a("v-app-bar",{staticClass:"min-width-420",attrs:{color:"primary",dark:"",app:""}},[a("v-icon",{attrs:{size:"32"}},[t._v("mdi-alpha-i")]),a("v-icon",{attrs:{size:"32"}},[t._v("mdi-alpha-o")]),a("v-icon",{attrs:{size:"32"}},[t._v("mdi-alpha-t")]),a("h3",[t._v("座位即時回報系統")]),a("v-spacer"),a("div",{staticClass:"hidden-sm-and-down"},t._l(t.titles,(function(e){return a("v-icon",{key:e.icon,staticClass:"mr-5",attrs:{size:"36",color:e.color},on:{click:function(a){return t.changePage(e.name)}}},[t._v(" "+t._s(e.icon)+" ")])})),1),a("v-app-bar-nav-icon",{staticClass:"hidden-md-and-up",on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}})],1),a("v-content",[a(t.componentId,{tag:"component"})],1),a("v-navigation-drawer",{staticStyle:{"z-index":"999999"},attrs:{absolute:"",right:"",temporary:"",width:t.navigationWidth},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{nav:"",dense:""}},[a("v-list-item-group",{attrs:{"active-class":"deep-purple--text text--accent-4"},model:{value:t.selectTitle,callback:function(e){t.selectTitle=e},expression:"selectTitle"}},t._l(t.titles,(function(e){return a("v-list-item",{key:e.name,staticClass:"my-3",on:{click:function(a){return t.changePage(e.name)}}},[a("v-icon",{staticClass:"mr-5",attrs:{size:"36",color:"white"==e.color?"black":e.color}},[t._v(" "+t._s(e.icon)+" ")]),a("span",{staticClass:"title"},[t._v(t._s(e.name))])],1)})),1)],1)],1)],1)},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-column justify-space-around fill-height"},[a("ActionButton",{staticClass:"my-5",attrs:{seats:t.seatsLocation}}),a("div",{staticClass:"scroll",staticStyle:{"max-height":"60vh"}},[a("table",t._l(t.seatsLocation,(function(e,n){return a("tr",{key:"row-"+n},[a("draggable",{attrs:{draggable:".seat",group:"a",move:t.handleMove},on:{end:t.handleDragEnd},model:{value:t.seatsLocation,callback:function(e){t.seatsLocation=e},expression:"seatsLocation"}},t._l(e,(function(e,o){return a("td",{key:n+"-"+o,staticClass:"seat pa-5",staticStyle:{color:"black"},attrs:{id:n+"-"+o,align:"center",valign:"middle"},on:{dblclick:function(a){return t.editSeatInfo({id:e.id,location:[n,o]})}}},["type-two"==t.seatsInfo[e.id]["chair-type"]?a("div",{staticClass:"d-flex flex-column fill-height justify-space-around"},t._l(2,(function(n){return a("div",{key:"type-tow-"+n,class:["空位"==t.seatsSituation[Object.keys(t.seatsSituation)[0]]["座位狀況"]?"is-empty":"is-not-empty",1==n?"round-top":"round-bottom","d-flex flex-column align-center justify-center type-one"]},[t._v(" "+t._s(e.id)+t._s(1==n?"（左）":"（右）")+" ")])})),0):a("div",{class:["空位"==t.seatsSituation[Object.keys(t.seatsSituation)[0]]["座位狀況"]?"is-empty":"is-not-empty","d-flex justify-center align-center type-one round","None"==e.id?"no-id":""],staticStyle:{height:"100%",width:"100%"}},[t._v(" "+t._s("None"!=e.id?e.id:"無座位")+" ")])])})),0)],1)})),0),a("EditSeatInfo",{attrs:{seat:t.editSeat,dialog:t.dialog,seatsInfo:t.seatsInfo}})],1)],1)},r=[],c=(a("ac1f"),a("1276"),a("310e")),l=a.n(c),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Change Seat Info.")]),a("v-card-text",{staticClass:"pb-0"},[a("v-text-field",{attrs:{outlined:"",label:"Seat ID","hide-details":"auto",error:t.error,rules:[t.checkId||"找不到座位 ID"]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateSeatInfo(e)}},model:{value:t.seat.id,callback:function(e){t.$set(t.seat,"id",e)},expression:"seat.id"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.closeEditSeatInfoDialog}},[t._v(" 取消 ")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.updateSeatInfo}},[t._v("儲存")])],1)],1)],1)},u=[],f=(a("99af"),a("0ff2")),p=a("59ca"),h=a.n(p);a("e71f"),a("66ce");n["a"].use(f["a"]),n["a"].use(f["b"]);var v={apiKey:"AIzaSyDGNHGO9TrhBEqTaBblM_iPYr14enANESM",authDomain:"ntut-iot.firebaseapp.com",databaseURL:"https://ntut-iot.firebaseio.com",projectId:"ntut-iot",storageBucket:"ntut-iot.appspot.com",messagingSenderId:"502488810407",appId:"1:502488810407:web:59c88562059a115bcbec82",measurementId:"G-00NLSYPLWS"},m=h.a.initializeApp(v),g=m.database(),b=m.firestore(),y=new n["a"],k=y,w={data:function(){return{chairTypes:["type-one","type-two"],error:!1}},props:{seat:Object,dialog:Boolean,seatsInfo:Object},computed:{checkId:function(){return void 0!=this.seatsInfo[this.seat.id]}},mounted:function(){var t=this;this.dialog&&document.addEventListener("keydown",(function(e){27==e.keyCode&&t.closeEditSeatInfoDialog()}),{once:!0})},methods:{closeEditSeatInfoDialog:function(){k.$emit("closeEditSeatInfoDialog")},updateSeatInfo:function(){var t=this.seat.location[0],e=this.seat.location[1];this.checkId?(g.ref("seats/".concat(t,"/").concat(e)).update({id:this.seat.id}),this.error=!1,this.closeEditSeatInfoDialog()):this.error=!0}}},x=w,I=a("2877"),S=a("6544"),C=a.n(S),_=a("8336"),A=a("b0af"),O=a("99d9"),V=a("169a"),E=a("2fa4"),j=a("8654"),D=Object(I["a"])(x,d,u,!1,null,null,null),T=D.exports;C()(D,{VBtn:_["a"],VCard:A["a"],VCardActions:O["a"],VCardText:O["b"],VCardTitle:O["c"],VDialog:V["a"],VSpacer:E["a"],VTextField:j["a"]});var L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("v-row",t._l(t.actions,(function(e,n){return a("v-col",{key:"action-"+n,staticClass:"text-center",attrs:{cols:"12",md:"3"}},[a("v-btn",{attrs:{rounded:"",color:"warning",dark:""},on:{click:function(a){return t.check(e)}}},[t._v(" "+t._s(e)+" ")])],1)})),1)],1),a("CheckAction",{attrs:{action:t.selectAction,dialog:t.dialog}})],1)},$=[],B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Check Your Action")]),a("v-card-text",{staticClass:"pb-0"},[t._v("確認要執行 "+t._s(t.action)+" 嗎？")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.closeDialog}},[t._v("取消")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.checkAction}},[t._v(" 儲存 ")])],1)],1)],1)},R=[],z={props:{action:String,dialog:Boolean},watch:{dialog:function(){var t=this;this.dialog&&(document.addEventListener("keydown",(function(e){27==e.keyCode&&t.closeDialog()}),{once:!0}),document.addEventListener("keydown",(function(e){13==e.keyCode&&t.checkAction()}),{once:!0}))}},methods:{closeDialog:function(){k.$emit("closeDialog")},checkAction:function(){k.$emit("confirmAction",this.action)}}},P=z,N=Object(I["a"])(P,B,R,!1,null,null,null),M=N.exports;C()(N,{VBtn:_["a"],VCard:A["a"],VCardActions:O["a"],VCardText:O["b"],VCardTitle:O["c"],VDialog:V["a"],VSpacer:E["a"]});var G={data:function(){return{actions:["Add Row","Remove Row","Add Column","Remove Column"],selectAction:"",dialog:!1}},props:{seats:Array},mounted:function(){var t=this;k.$on("confirmAction",(function(e){"Add Row"==e?t.addRow():"Remove Row"==e?t.removeRow():"Add Column"==e?t.addColumn():"Remove Column"==e&&t.removeColumn(),t.dialog=!1})),k.$on("closeDialog",(function(){t.dialog=!1}))},components:{CheckAction:M},methods:{check:function(t){this.selectAction=t,this.dialog=!0},addRow:function(){for(var t=[],e=0;e<this.seats[0].length;e++)t.push({id:"None"});g.ref("/seats/".concat(this.seats.length)).set(t)},removeRow:function(){var t=this.seats.length-1;this.seats.length-1>=1&&g.ref("/seats/".concat(t)).remove()},addColumn:function(){for(var t=this.seats,e=0;e<this.seats.length;e++)t[e].push({id:"None"});g.ref("/seats").set(t)},removeColumn:function(){if(this.seats[0].length-1>=1){for(var t=this.seats,e=0;e<this.seats.length;e++)t[e].pop();g.ref("/seats").set(t)}}}},Y=G,W=a("62ad"),F=a("0fd9"),H=Object(I["a"])(Y,L,$,!1,null,null,null),U=H.exports;C()(H,{VBtn:_["a"],VCol:W["a"],VRow:F["a"]});var J={components:{draggable:l.a,EditSeatInfo:T,ActionButton:U},data:function(){return{editSeat:{},dialog:!1,dragElement:null,dropElement:null,seatsInfo:{},seatsLocation:[],seatsSituation:{}}},mounted:function(){var t=this;k.$on("closeEditSeatInfoDialog",(function(){t.dialog=!1})),k.$on("updateSeatInfo",(function(e){var a=e.location;delete e.location,t.seatsLocation[a[0]][a[1]]=e,t.dialog=!1})),k.$on("changeSeatTable",(function(e){t.seatsLocation=e}))},methods:{handleDragEnd:function(){var t=this.dragElement[0],e=this.dragElement[1],a=this.dropElement[0],n=this.dropElement[1],o=Object.assign([],this.seatsLocation),i=o[t][e];o[t][e]=o[a][n],o[a][n]=i,g.ref("/seats").set(o)},handleMove:function(t){var e=t.dragged,a=t.related,n=e.id,o=a.id;return void 0!=n&&void 0!=o&&(this.dropElement=n.split("-"),this.dragElement=o.split("-")),!1},editSeatInfo:function(t){this.editSeat=t,this.dialog=!0}},firestore:{seatsInfo:b.collection("seat-situation").doc("seat-info")},firebase:{seatsLocation:g.ref("/seats"),seatsSituation:g.ref("/seat-info").limitToLast(1)}},q=J,K=(a("e69a"),Object(I["a"])(q,s,r,!1,null,"772fadbf",null)),Q=K.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("DataGauge",{attrs:{series:[t.dataInfo[Object.keys(t.dataInfo)[0]]["溫度"]],label:"溫度"}}),a("DataGauge",{attrs:{series:[t.dataInfo[Object.keys(t.dataInfo)[0]]["濕度"]],label:"濕度"}})],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("SeatUsuageChart")],1)],1)],1)},Z=[],tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-center mt-10",attrs:{id:"chart"}},[a("VueApexChart",{key:t.test,attrs:{type:"area",height:"350",options:t.chartOptions,series:t.series}})],1)},et=[],at=(a("4160"),a("b64b"),a("159b"),a("1321")),nt=a.n(at),ot={data:function(){return{dataInfo:{},test:0,series:[{data:[]}],chartOptions:{chart:{type:"area",stacked:!1,height:350,zoom:{type:"x",enabled:!0,autoScaleYaxis:!0},toolbar:{autoSelected:"zoom"}},dataLabels:{formatter:function(t){return t+"%"}},fill:{type:"gradient",gradient:{shadeIntensity:1,inverseColors:!1,opacityFrom:.5,opacityTo:0,stops:[0,90,100]}},yaxis:{title:{text:"座位使用率（%）",style:{fontSize:"18px"}}},xaxis:{type:"datetime"},tooltip:{shared:!1,y:{formatter:function(t){return t+"%"}}}}}},watch:{dataInfo:function(){this.updateInfo()}},methods:{updateInfo:function(){var t=this,e=this.series,a=Object.keys(this.dataInfo);a.forEach((function(a){e[0].data.push([new Date(t.dataInfo[a]["日期"]+" "+t.dataInfo[a]["時間"]),"空位"==t.dataInfo[a]["座位狀況"]?["0"]:["100"]])})),this.series=e,this.test+=1}},components:{VueApexChart:nt.a},firebase:{dataInfo:g.ref("/seat-info")}},it=ot,st=Object(I["a"])(it,tt,et,!1,null,null,null),rt=st.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-center mt-10",attrs:{id:"chart"}},[a("VueApexChart",{staticStyle:{"max-width":"100vw"},attrs:{type:"radialBar",height:"350",options:t.chartOptions,series:t.series}})],1)},lt=[],dt={props:{series:Array,label:String},data:function(){return{chartOptions:{chart:{height:350,width:300,type:"radialBar",offsetY:-10},plotOptions:{radialBar:{startAngle:-135,endAngle:135,dataLabels:{name:{fontSize:"16px",color:void 0,offsetY:120},value:{offsetY:76,fontSize:"22px",color:void 0,formatter:function(t){return t+"%"}}}}},fill:{type:"gradient",gradient:{shade:"dark",shadeIntensity:.15,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,50,65,91]}},stroke:{dashArray:4},labels:[this.label]}}},components:{VueApexChart:nt.a}},ut=dt,ft=Object(I["a"])(ut,ct,lt,!1,null,null,null),pt=ft.exports,ht={data:function(){return{dataInfo:{}}},components:{SeatUsuageChart:rt,DataGauge:pt},firebase:{dataInfo:g.ref("/seat-info").limitToLast(1)}},vt=ht,mt=Object(I["a"])(vt,X,Z,!1,null,null,null),gt=mt.exports;C()(mt,{VCol:W["a"],VRow:F["a"]});var bt={components:{SeatTable:Q,Analysis:gt},watch:{selectTitle:function(){this.drawer=!1},drawer:function(){this.drawer?this.navigationWidth=260:this.navigationWidth=0}},data:function(){return{componentId:"SeatTable",drawer:!1,navigationWidth:0,selectTitle:null,titles:[{icon:"mdi-home",name:"Home",color:"white"},{icon:"mdi-chart-bar",name:"Analysis",color:"#ffab00"}]}},methods:{changePage:function(t){this.componentId="Home"==t?"SeatTable":"Analysis"}}},yt=bt,kt=(a("034f"),a("7496")),wt=a("40dc"),xt=a("5bc1"),It=a("a75b"),St=a("132d"),Ct=a("8860"),_t=a("da13"),At=a("1baa"),Ot=a("f774"),Vt=Object(I["a"])(yt,o,i,!1,null,null,null),Et=Vt.exports;C()(Vt,{VApp:kt["a"],VAppBar:wt["a"],VAppBarNavIcon:xt["a"],VContent:It["a"],VIcon:St["a"],VList:Ct["a"],VListItem:_t["a"],VListItemGroup:At["a"],VNavigationDrawer:Ot["a"],VSpacer:E["a"]});var jt=a("f309");n["a"].use(jt["a"]);var Dt=new jt["a"]({});n["a"].config.productionTip=!1,new n["a"]({vuetify:Dt,render:function(t){return t(Et)}}).$mount("#app")},"8a23":function(t,e,a){},bfba:function(t,e,a){},e69a:function(t,e,a){"use strict";var n=a("bfba"),o=a.n(n);o.a}});
//# sourceMappingURL=app.2818f6e1.js.map